## ç”¨æ’é™¤æ³•è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
æœ¬æ–‡æ¥è‡ª[LeetCodeçš„è¿™ç¯‡é¢˜è§£](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)

æ€è·¯ï¼šåˆ©ç”¨æ’é™¤æ³•å°†æ’åºçš„æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸å¯èƒ½å‡ºç°`target`çš„åŒºé—´ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™å¯èƒ½å‡ºç°`target`ã€‚æ ¹æ®ä¸­é—´å…ƒç´ è¢«åˆ†åˆ°å·¦è¾¹åŒºé—´è¿˜æ˜¯å³è¾¹åŒºé—´ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µ:

1. `mid`è¢«åˆ†åœ¨å·¦è¾¹ï¼Œæœç´¢ç©ºé—´è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
```
    1   2   3   4   5   6   7   8
   ---------------  *************
   left        mid           right
```
* `[left,mid]`==>`right=mid`
* `[mid+1,right]`==>`left=mid+1`

2. `mid`è¢«åˆ†åœ¨å³è¾¹
```
    1   2   3   4   5   6   7   8
   ----------  *******************
   left         mid          right
```
* `[left,mid-1]`==>`right=mid-1`
* `[mid,right]`==>`left=mid`

### ç”¨æ’é™¤æ³•äºŒåˆ†æŸ¥æ‰¾çš„ä¸€èˆ¬æ­¥éª¤
1.  åœ¨`while`å¾ªç¯ä¸­æŠŠæ¡ä»¶å†™ä¸º`left<right`ï¼Œè¿™æ ·åœ¨å¾ªç¯ç»“æŸæ—¶ï¼Œ`left==right`ã€‚
2.  åœ¨å¾ªç¯ä¸­çš„åˆ¤æ–­ï¼Œæ€è€ƒ`nums[mid]`æ»¡è¶³ä»€ä¹ˆæ¡ä»¶æ—¶ï¼Œ`nums[mid]`ä¸æ˜¯ç›®æ ‡å…ƒç´ ï¼Œæ¥ç€åˆ¤æ–­`mid`çš„å·¦å³æ˜¯å¦å¯èƒ½å­˜åœ¨ç€ç›®æ ‡å…ƒç´ ã€‚
3.  æ ¹æ®â€œè¾¹ç•Œæ”¶ç¼©â€è¡Œä¸ºä¿®æ”¹ä¸­é—´æ•°ï¼Œ`int mid = left + (right-left)/2;`ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™ç§å–ä¸­é—´æ•°çš„æ–¹æ³•ï¼Œç”±äºå‘ä¸‹å–æ•´ï¼Œå°†æ°¸è¿œå–ä¸åˆ°å³è¾¹ç•Œ`right`ã€‚
    *  ä¸¾ä¸ªä¾‹å­ï¼Œ`left=3`ï¼Œ`right=4`ï¼Œ`mid=3+(4-3)/2=3`ã€‚å½“ç”¨**ç¬¬ä¸€ç§**åŒºé—´æ”¶ç¼©æ—¶ï¼š`i:`å½“`left=mid+1=4`ï¼Œå› æ­¤ä¸‹ä¸€ä¸ªåŒºé—´ä¸º`[4,4]`ï¼Œæ­¤æ—¶å¾ªç¯å°†ç»“æŸã€‚`ii:`å½“`right=mid-1=3`ï¼Œä¸‹ä¸€ä¸ªåŒºé—´ä¸º`[3,3]`ï¼Œæ­¤æ—¶å¾ªç¯ä¹Ÿç»“æŸã€‚ä¸¤ç§æƒ…å†µç»“æŸéƒ½å¯¹åº”ç€`left==right`ã€‚å½“ç”¨**ç¬¬äºŒç§**åŒºé—´æ”¶ç¼©æ–¹æ¡ˆæ—¶ï¼š`i:`å½“`left=mid=3`ï¼Œæ­¤æ—¶ä¸‹ä¸€ä¸ªåŒºé—´ä¸º`[3,4]`ï¼Œè¿™æ ·ä¼šé€ æˆæ­»å¾ªç¯ã€‚`ii:`å½“`right=mid-1=2`ï¼Œ`left>right`æ­¤æ—¶å¾ªç¯ä¼šç»“æŸï¼Œ`left!=right`è¿™ä¹Ÿä¸æ˜¯æˆ‘ä»¬å‘çœ‹åˆ°çš„ã€‚
    *  å› æ­¤å½“ä½¿ç”¨ç¬¬äºŒç§æ”¶ç¼©æ–¹æ¡ˆæ—¶ï¼Œå³å°†`mid`å½’å…¥å³è¾¹åŒºé—´æ—¶ï¼Œéœ€è¦è°ƒæ•´`mid`è®¡ç®—å…¬å¼ï¼Œé¿å…æ­»å¾ªç¯ã€‚é€šè¿‡`int mid = left + (right-left+1)/2;`ï¼Œä½¿å¾—`mid`è®¡ç®—å‘ä¸Šå–æ•´ã€‚åŒæ ·`left=3`ï¼Œ`right=4`ï¼Œ`mid=3+(4-3+1)/2=4`çš„ä¾‹å­ï¼Œ`i:`å½“`left=mid=4`ï¼Œæ­¤æ—¶ä¸‹ä¸€ä¸ªåŒºé—´ä¸º`[4,4]`ï¼Œæ­¤æ—¶å¾ªç¯ç»“æŸã€‚`i:`å½“`right=mid-1=3`ï¼Œæ­¤æ—¶ä¸‹ä¸€åŒºé—´ä¸º`[3,3]`ï¼Œæ­¤æ—¶å¾ªç¯ç»“æŸã€‚è¿™æ—¶æ— è®ºå“ªä¸ªæ”¶ç¼©åŒºé—´éƒ½å¯ä»¥ç»ˆæ­¢å¾ªç¯ï¼Œé¿å…äº†æ­»å¾ªç¯å’Œå¾ªç¯ç»“æŸæ—¶`left`å’Œ`right`ä¸ç­‰çš„æƒ…å†µã€‚
4.  é€€å‡ºå¾ªç¯æ—¶ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µå¯¹`nums[left]`çœ‹æ˜¯å¦å†è¿›è¡Œä¸€æ¬¡æ£€æŸ¥ã€‚å› ä¸ºæ•°ç»„ä¸­å¾ˆå¯èƒ½ä¸å­˜åœ¨éœ€è¦æ‰¾çš„ç›®æ ‡å…ƒç´ ã€‚

ä¸‹é¢ç”¨å‡ é“é¢˜ç›®æ¥ç†Ÿæ‚‰ä¸‹è¿™ç§æ’é™¤æ³•çš„äºŒåˆ†æŸ¥æ‰¾ã€‚
>**é¢˜ç›®**ï¼šï¼ˆLeetCode 33ï¼‰åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ã€‚ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ï¼Œè¿”å› [-1, -1]ã€‚

è¿™æ˜¯ä¸€é“å…¸å‹çš„äºŒåˆ†æŸ¥æ‰¾çš„é¢˜ç›®ï¼Œåˆ†åˆ«æ‰¾åˆ°å·¦è¾¹ç•Œå’Œå³è¾¹ç•Œï¼ŒåŒæ—¶åº”ç”¨äº†ä»¥ä¸Šä¸¤ç§æƒ…å†µã€‚
```C++
class Solution {
public:
    vector<int> searchRange(vector<int>& nums, int target) {
        vector<int> ans; //å®šä¹‰è¿”å›ç»“æœæ•°ç»„
        //é¦–å…ˆéœ€è¦æ’é™¤ç‰¹æ®Šæƒ…å†µï¼Œå½“æ•°ç»„ä¸ºç©ºæ—¶ã€‚
        if(nums.size()==0){
            return vector<int>{-1,-1};
        }
        //é¦–å…ˆå…ˆæ‰¾å·¦è¾¹çš„è¾¹ç•Œ
        int left = 0, right = nums.size()-1;
        
        //å¼€å§‹äºŒåˆ†æŸ¥æ‰¾å·¦è¾¹è¾¹ç•Œ
        while(left<right){//ä¸¥æ ¼å°äº
            int mid = left + (right-left)/2;
            //æ€è€ƒä½•æ˜¯ç»å¯¹ä¸å¯èƒ½å‡ºç°çš„æƒ…å†µ
            //å› ä¸ºæ˜¯å·¦è¾¹ç•Œï¼Œå¦‚æœä¸­é—´çš„æ•°å°äºtargetï¼Œé‚£ä¹ˆè¯´æ˜å·¦è¾¹çš„åŒºé—´ä¸å¯èƒ½å‡ºç°ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œã€‚
            if(nums[mid] < target){
                left = mid+1;
            }else{
                //å…¶ä»–æƒ…å†µï¼Œä»£è¡¨nums[mid]>=targetï¼Œåˆ™è¯´æ˜éœ€è¦æ‰¾çš„ç›®æ ‡åœ¨å·¦åŒºé—´ï¼Œæ”¶ç¼©å³è¾¹ç•Œã€‚
                right = mid;
            }
            //æ­¤æ—¶æ”¶ç¼©çš„æ¡ä»¶æ ¹æ®ä¸Šè¿°è®¨è®ºä¸ä¼šå‡ºç°æ­»å¾ªç¯ï¼Œä¸éœ€è¦ä¿®æ”¹midçš„è®¡ç®—æ–¹æ³•ã€‚
        }
        //å¾ªç¯ç»“æŸï¼Œæ­¤æ—¶æœ‰left==rightï¼Œç”±äºå¯èƒ½ä¸å­˜åœ¨ï¼Œå› æ­¤éœ€è¦é¢å¤–åˆ¤æ–­ã€‚
        if(nums[left] != target){
            return vector<int>{-1,-1};
        }
        ans.push_back(left);
        //æœç´¢å³è¾¹ç•Œ
        left = 0, right = nums.size()-1;
        while(left<right){
            int mid = left+(right-left+1)/2;
            //æ³¨æ„ï¼Œç”±äºä½¿ç”¨äº†ç¬¬äºŒç§è¾¹ç•Œæ”¶ç¼©æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦æ”¹æˆå‘ä¸Šå–æ•´çš„è®¡ç®—æ–¹å¼ã€‚
            //åŒæ ·æ€è€ƒç»å¯¹ä¸å¯èƒ½å‡ºç°çš„æƒ…å†µ
            //å› ä¸ºæœç´¢å³è¾¹ç•Œï¼Œå¦‚æœä¸­é—´çš„æ•°å¤§äºtargetï¼Œåˆ™è¯´æ˜å³è¾¹çš„åŒºé—´ä¸å¯èƒ½å­˜åœ¨ï¼Œæ”¶ç¼©å³è¾¹ç•Œ
            if(nums[mid] > target){
                right = mid-1;
            }else{
                //å½“å°äºç­‰äºtargetæ—¶ï¼Œåˆ™è¯´æ˜åœ¨å³åŒºé—´ä¸­æœç´¢ç›®æ ‡å€¼ï¼Œå› æ­¤æ”¶ç¼©å·¦è¾¹ç•Œ
                left = mid;
            }
        } 
        ans.push_back(left);
        return ans;
    }
}
```
`PS.`(è¯»ä¸€ä¸ªå¥½çš„é¢˜è§£èƒœè¿‡åˆ·10é“é¢˜ï¼ŒçœŸæ­£çš„ä¸€æ¬¡é€šè¿‡æˆ‘æ„ŸåŠ¨å“­äº†ğŸ˜­)

>**é¢˜ç›®**ï¼šï¼ˆleft_boundï¼‰åœ¨æ’åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„æ•°ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›-1ã€‚**å¿«æ‰‹é¢è¯•é¢˜**
```c++
class Solution {
public:
    int left_bound(vector<int> &nums,int target){
        if(nums.size() == 0) return -1;
        int left = 0,right = nums.size()-1;
        while(left < right){
            int mid = left+ (right-left)/2;
            //æ€è€ƒä¸å¯èƒ½çš„æƒ…å†µ
            //å› ä¸ºæ˜¯æ‰¾å¤§äºç­‰äºtargetçš„æ•°ï¼Œå¦‚æœnums[mid]å°äºtargetï¼Œåˆ™è¯´æ˜ï¼Œå·¦è¾¹çš„åŒºé—´ä¸å¯èƒ½å­˜åœ¨ç›®æ ‡å€¼ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œã€‚
            if(nums[mid]<target){
                left = mid+1;
            }else{
                right = mid;
            }
        }
        if(nums[left]<target){
            return -1;
        }
        return left;
    }
}
```
`PS.`(é¢è¯•æ—¶å„ç§è¾¹ç•Œæƒ…å†µæä¸æ¸…æ¥šï¼Œä¸€ç›´å†™ä¸å‡ºæ¥ğŸ˜­)

>**é¢˜ç›®**ï¼šï¼ˆLeetCode 33ï¼‰æœç´¢æ—‹è½¬æ’åºæ•°ç»„ã€‚å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚(ä¾‹å¦‚ï¼Œæ•°ç»„[0,1,2,4,5,6,7]å¯èƒ½å˜ä¸º[4,5,6,7,0,1,2])ã€‚æœç´¢ä¸€ä¸ªç»™å®šçš„ç›®æ ‡å€¼ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å›-1ã€‚
```c++
class Solution {
public:
    int search(vector<int>& nums, int target) {
        if(nums.size() == 0) return -1;
        int left = 0, right = nums.size()-1;
        while(left < right){
            int mid = left + (right-left)/2;
            //ç”±äºæ˜¯æ—‹è½¬æ•°ç»„ï¼Œä¸æ˜¯ä¸¥æ ¼æ’åºçš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šmidçš„ä½ç½®å†å†³å®šæ€ä¹ˆæ”¶ç¼©è¾¹ç•Œã€‚
            //é¦–å…ˆåˆ¤æ–­midæ‰€åœ¨çš„ä½ç½®
            if(nums[mid] == target) return mid;
            if(nums[mid] >= nums[left]){
                //è¯´æ˜åœ¨å·¦è¾¹é€’å¢åŒºé—´ä¸Šï¼Œç­‰å·æƒ…å†µæˆ‘ä»¬éœ€è¦å…³æ³¨ï¼Œå¦‚æœç›¸ç­‰æˆ‘ä»¬å°†å…¶å½“ä½œå·¦é€’å¢åŒºé—´ã€‚
                if(nums[mid]<target || nums[left]>target){
                    //å¦‚æœmidæ¯”targetå°ï¼Œåˆæ˜¯åœ¨å·¦é€’å¢åŒºé—´ï¼Œåˆ™è¯´æ˜è‚¯å®šåœ¨å³è¾¹åŒºé—´ã€‚åŒæ—¶å½“left>targetæ—¶ï¼Œè¯´æ˜å·¦è¾¹åŒºé—´ä¸å¯èƒ½å­˜åœ¨targetï¼Œæ‰€ä»¥æ”¶ç¼©å·¦è¾¹ç•Œã€‚
                    left = mid+1;
                }else{
                    //ä¸Šè¿°æƒ…å†µçš„ç›¸åæƒ…å†µï¼Œåˆ™æ”¶ç¼©å³è¾¹ç•Œã€‚
                    right = mid;
                }
            }else{
                //è¯´æ˜åœ¨å³è¾¹é€’å¢åŒºé—´ä¸Š
                if(nums[mid]>target || nums[right]<target){
                    //å¦‚æœmid>targetï¼Œè¯´æ˜ä¸å¯èƒ½å†å‡ºç°åœ¨å³åŒºé—´ï¼Œæ”¶ç¼©å³åŒºé—´ï¼ŒåŒæ—¶å½“right<targetæ—¶ï¼Œä¹Ÿä¸å¯èƒ½å†å­˜åœ¨äºå³åŒºé—´äº†ï¼Œæ”¶ç¼©å³è¾¹ç•Œ
                    right = mid;
                }else{
                    //ä¸Šè¿°æƒ…å†µçš„ç›¸åæƒ…å†µéƒ½å³å¯èƒ½å­˜åœ¨å³åŒºé—´ã€‚
                    left = mid+1;
                }
            }
        }
        if(nums[left] != target) return -1;
        return left;
    }
}
```

>**é¢˜ç›®**ï¼šï¼ˆLeetCode 81ï¼‰æœç´¢æ—‹è½¬æ’åºæ•°ç»„ IIã€‚å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚(ä¾‹å¦‚ï¼Œæ•°ç»„[0,0,1,2,2,5,6]å¯èƒ½å˜ä¸ºÂ [2,5,6,0,0,1,2])ã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚è‹¥å­˜åœ¨è¿”å›Â trueï¼Œå¦åˆ™è¿”å›Â falseã€‚

åˆ†æï¼šå’Œä¸Šä¸€é“é¢˜å”¯ä¸€çš„ä¸åŒåœ¨äºå…è®¸ç›¸ç­‰çš„æƒ…å†µï¼Œè¿™ä¼šå¯¹åˆ¤æ–­å¤„äºå“ªä¸ªè¾¹ç•Œä¸Šäº§ç”Ÿé—®é¢˜ã€‚
```c++
class Solution {
public:
    bool search(vector<int>& nums, int target) {
        if(nums.size() == 0) return -1;
        if(nums.size() == 1) return nums[0]==target;
        int left = 0, right = nums.size()-1;
        while(left < right){
            int mid = left + (right-left)/2;
            //ç”±äºæ˜¯æ—‹è½¬æ•°ç»„ï¼Œä¸æ˜¯ä¸¥æ ¼æ’åºçš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šmidçš„ä½ç½®å†å†³å®šæ€ä¹ˆæ”¶ç¼©è¾¹ç•Œã€‚
            //é¦–å…ˆåˆ¤æ–­midæ‰€åœ¨çš„ä½ç½®
            if(nums[mid] == target) return true;
            //é¢å¤–åˆ¤æ–­ç›¸ç­‰å¯¹æƒ…å†µ
            if(nums[mid] == nums[left]){
                left = left+1;
                continue;
                //æ”¶ç¼©å·¦è¾¹ç•Œå¯èƒ½å¯¼è‡´æœ€åä¸€ä¸ªå…ƒç´ æ²¡æœ‰è¢«åˆ¤æ–­ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç¨‹åºæœ€åè¿›è¡Œé¢å¤–åˆ¤æ–­ã€‚
            }
            if(nums[mid] > nums[left]){
                //è¯´æ˜åœ¨å·¦è¾¹é€’å¢åŒºé—´ä¸Šã€‚
                if(nums[mid]<target || nums[left]>target){
                    //å¦‚æœmidæ¯”targetå°ï¼Œåˆæ˜¯åœ¨å·¦é€’å¢åŒºé—´ï¼Œåˆ™è¯´æ˜è‚¯å®šåœ¨å³è¾¹åŒºé—´ã€‚åŒæ—¶å½“left>targetæ—¶ï¼Œè¯´æ˜å·¦è¾¹åŒºé—´ä¸å¯èƒ½å­˜åœ¨targetï¼Œæ‰€ä»¥æ”¶ç¼©å·¦è¾¹ç•Œã€‚
                    left = mid+1;
                }else{
                    //ä¸Šè¿°æƒ…å†µçš„ç›¸åæƒ…å†µï¼Œåˆ™æ”¶ç¼©å³è¾¹ç•Œã€‚
                    right = mid;
                }
            }else{
                //è¯´æ˜åœ¨å³è¾¹é€’å¢åŒºé—´ä¸Š
                if(nums[mid]>target || nums[right]<target){
                    //å¦‚æœmid>targetï¼Œè¯´æ˜ä¸å¯èƒ½å†å‡ºç°åœ¨å³åŒºé—´ï¼Œæ”¶ç¼©å³åŒºé—´ï¼ŒåŒæ—¶å½“right<targetæ—¶ï¼Œä¹Ÿä¸å¯èƒ½å†å­˜åœ¨äºå³åŒºé—´äº†ï¼Œæ”¶ç¼©å³è¾¹ç•Œ
                    right = mid;
                }else{
                    //ä¸Šè¿°æƒ…å†µçš„ç›¸åæƒ…å†µéƒ½å³å¯èƒ½å­˜åœ¨å³åŒºé—´ã€‚
                    left = mid+1;
                }
            }
        }
        if(nums[left] == target) return true;   //è¿™æ˜¯æ²¡æœ‰è¢«åˆ¤æ–­çš„
        return false;
    }
}
```
